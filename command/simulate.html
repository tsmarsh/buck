<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><script>var loc = new String(window.location); if (loc.indexOf('facebook.github.io/buck') != -1) {window.location.replace(loc.replace('facebook.github.io/buck', 'buckbuild.com'));}</script><!-- Facebook Pixel Code --><script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','//connect.facebook.net/en_US/fbevents.js'); fbq('init', '1637165926500152'); fbq('track', 'PageView');</script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1637165926500152&ev=PageView&noscript=1" /></noscript><!-- End Facebook Pixel Code --><title>Buck: buck simulate</title><link type="image/png" rel="shortcut icon" href="/static/favicon.png" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/google-code-prettify/prettify.css" ><link type="text/css" rel="stylesheet" href="/static/buck.css"><meta property="og:locale" content="en_US"><meta property="og:title" content="buck simulate"><meta property="og:site_name" content="Buck: a build tool"><meta property="og:image" content="http://buckbuild.com/static/og.png"><meta property="og:type" content="article"><meta property="og:description" content="A command that simulates a build and outputs expected run time stats."><meta property="fb:admins" content="584556688222168"></head><body><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><header class='topbar'><nav class='width'><a href='http://buckbuild.com/'><h1>Buck</h1></a><ul class='menu'><li><a href='/setup/quick_start.html'>Get Started</a><li><a href='https://groups.google.com/forum/#!forum/buck-build'>Group</a><li><a href='/javadoc/'>API</a><li><a href='https://github.com/facebook/buck'>GitHub</a></ul></nav></header><section class='content'><div class='width'><article><h1>buck simulate</h1><div class="overview"><p>Simulates a build for one or more specified targets and produces a report with runtime statistics.</p><pre>{buck simulate //java/com/example/app:amazing}</pre><h2>Parameters</h2><ul class="arglist"><li class="arg"><code>--rule-fallback-time-millis</code>  Specifies the default time in millis each BuildTarget node in the build graph should take during the simulation. Defaults to 10 milliseconds.<li class="arg"><code>--report-file</code>  File where the final report will be output to. The format of the file is JSON. Defaults to 'buck_simulate_report.json'. This is an example of a report file:<p><pre class="prettyprint lang-js">
  {
    "timestamp_millis" : 1446206932826,
    "build_duration_millis" : 650,
    "total_action_graph_nodes" : 672,
    "used_action_graph_nodes" : 445,
    "total_dependency_dag_edges" : 4137,
    "build_targets" : [ "//programs:buck" ],
    "number_of_threads" : 1000,
    "action_graph_nodes_without_simulate_time" : 445,
    "simulate_times_file" : "buck_simulate_times_2015-10-21.json",
    "simulate_time_type" : "p60",
    "simulate_default_millis" : 10
  }
  </pre></p><li class="arg"><code>--num-threads</code>  The number of threads to simulate the build with. The simulation doesn't actually instantiate any threads in the system. Defaults to 1.25 times the number of processors in the system.<li class="arg"><code>--times-file</code>  A JSON file containing simulation times in millis for each BuildTarget node in in the ActionGraph.<p>Here's an example of the format:</p><pre class="prettyprint lang-js">
  {
    "build_targets": {
      "//target/number/one:release": {
        "avg": 3.142857142857143,
        "count": 21.0,
        "p50": 1.0,
        "p90": 2.0,
        "p95": 26.0,
        "p99": 28.400000000000002
      },
      "//target/number/two:release": {
        "avg": 46.333333333333336,
        "count": 21.0,
        "p50": 10.0,
        "p90": 26.0,
        "p95": 128.0,
        "p99": 541.6000000000004
      },
      "//target/number/three:release#dex": {
        "avg": 284.875,
        "count": 8.0,
        "p50": 7.0,
        "p90": 679.1999999999997,
        "p95": 1447.0999999999988,
        "p99": 2061.419999999999
      }
    }
  }
  </pre></ul></div></article><nav><h3>Getting Started</h3><ul><li><a href="/about/overview.html">Overview</a><li><a href="/setup/install.html">Downloading and Installing Buck</a><li><a href="/setup/quick_start.html">Quick Start</a><li><a href="/article/exopackage.html">Exopackage</a><li><a href="/article/query_cheat_sheet.html">Buck Query Cheat Sheet</a></ul><h3>About</h3><ul><li><a href="/concept/what_makes_buck_so_fast.html">What Makes Buck so Fast?</a><li><a href="/concept/troubleshooting.html">Troubleshooting</a><li><a href="/about/performance_tuning.html">Performance Tuning</a><li><a href="/concept/faq.html">FAQ</a><li><a href="/presentations/">Learn More (Buck Presentations)</a></ul><h3>Concepts</h3><ul><li><a href="/concept/build_rule.html">Build Rule</a><li><a href="/concept/build_target.html">Build Target</a><li><a href="/concept/build_file.html">Build File</a><li><a href="/concept/buckversion.html">.buckversion</a><li><a href="/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/concept/buckjavaargs.html">.buckjavaargs</a><li><a href="/concept/buckconfig.html">.buckconfig</a><li><a href="/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/concept/visibility.html">Visibility</a><li><a href="/concept/http_cache_api.html">HTTP Cache API</a></ul><h3>Build Rules</h3><ul><li><strong>Core</strong></li><li><a href="/rule/genrule.html">genrule()</a><li><a href="/rule/remote_file.html">remote_file()</a><li><a href="/rule/zip_file.html">zip_file()</a><li><strong>Android</strong></li><li><a href="/rule/android_aar.html">android_aar()</a><li><a href="/rule/android_binary.html">android_binary()</a><li><a href="/rule/android_build_config.html">android_build_config()</a><li><a href="/rule/android_instrumentation_apk.html">android_instrumentation_apk()</a><li><a href="/rule/android_instrumentation_test.html">android_instrumentation_test()</a><li><a href="/rule/android_library.html">android_library()</a><li><a href="/rule/android_manifest.html">android_manifest()</a><li><a href="/rule/android_prebuilt_aar.html">android_prebuilt_aar()</a><li><a href="/rule/android_resource.html">android_resource()</a><li><a href="/rule/apk_genrule.html">apk_genrule()</a><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/gen_aidl.html">gen_aidl()</a><li><a href="/rule/keystore.html">keystore()</a><li><a href="/rule/ndk_library.html">ndk_library()</a><li><a href="/rule/prebuilt_cxx_library.html">prebuilt_cxx_library()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/rule/project_config.html">project_config()</a><li><strong>CXX</strong></li><li><a href="/rule/cxx_binary.html">cxx_binary()</a><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/cxx_test.html">cxx_test()</a><li><a href="/rule/prebuilt_cxx_library.html">prebuilt_cxx_library()</a><li><strong>D</strong></li><li><a href="/rule/d_binary.html">d_binary()</a><li><a href="/rule/d_library.html">d_library()</a><li><a href="/rule/d_test.html">d_test()</a><li><strong>Go</strong></li><li><a href="/rule/go_binary.html">go_binary()</a><li><a href="/rule/go_library.html">go_library()</a><li><a href="/rule/go_test.html">go_test()</a><li><strong>Groovy</strong></li><li><a href="/rule/groovy_library.html">groovy_library()</a><li><strong>Halide</strong></li><li><a href="/rule/halide_library.html">halide_library()</a><li><strong>iOS</strong></li><li><a href="/rule/apple_asset_catalog.html">apple_asset_catalog()</a><li><a href="/rule/apple_binary.html">apple_binary()</a><li><a href="/rule/apple_bundle.html">apple_bundle()</a><li><a href="/rule/apple_library.html">apple_library()</a><li><a href="/rule/apple_package.html">apple_package()</a><li><a href="/rule/apple_resource.html">apple_resource()</a><li><a href="/rule/apple_test.html">apple_test()</a><li><a href="/rule/prebuilt_cxx_library.html">prebuilt_cxx_library()</a><li><strong>Java</strong></li><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/java_binary.html">java_binary()</a><li><a href="/rule/java_library.html">java_library()</a><li><a href="/rule/java_test.html">java_test()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><strong>Python</strong></li><li><a href="/rule/prebuilt_python_library.html">prebuilt_python_library()</a><li><a href="/rule/python_binary.html">python_binary()</a><li><a href="/rule/python_library.html">python_library()</a><li><a href="/rule/python_test.html">python_test()</a><li><strong>Rust</strong></li><li><a href="/rule/rust_binary.html">rust_binary()</a><li><a href="/rule/rust_library.html">rust_library()</a><li><strong>.Net</strong></li><li><a href="/rule/csharp_library.html">csharp_library()</a><li><a href="/rule/prebuilt_dotnet_library.html">prebuilt_dotnet_library()</a></ul><h3>Functions</h3><ul><li><a href="/function/glob.html">glob()</a><li><a href="/function/include_defs.html">include_defs()</a><li><a href="/function/subdir_glob.html">subdir_glob()</a><li><a href="/function/string_parameter_macros.html">String Parameter Macros</a></ul><h3>Commands</h3><ul><li><a href="/command/common_parameters.html">Common Parameters</a><li><a href="/command/audit.html">buck audit</a><li><a href="/command/build.html">buck build</a><li><a href="/command/clean.html">buck clean</a><li><a href="/command/fetch.html">buck fetch</a><li><a href="/command/install.html">buck install</a><li><a href="/command/project.html">buck project</a><li><a href="/command/query.html">buck query</a><li><a href="/command/quickstart.html">buck quickstart</a><li><a href="/command/run.html">buck run</a><li><a href="/command/root.html">buck root</a><li><a href="/command/server.html">buck server</a><li><a href="/command/simulate.html">buck simulate</a><li><a href="/command/targets.html">buck targets</a><li><a href="/command/test.html">buck test</a><li><a href="/command/uninstall.html">buck uninstall</a><li><a href="/command/buckd.html">buckd</a></ul><h3>Extending Buck</h3><ul><li><a href="/extending/macros.html">Custom Macros</a><li><a href="/extending/rules.html">Custom Rules</a></ul><h3>Contributing to Buck</h3><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="http://stackoverflow.com/questions/ask?tags=buck">Get Support</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/contributing/tour.html">Tour of the Codebase</a><li><a href="/contributing/development.html">Development Workflow</a><li><a href="/contributing/codestyle.html">Code Style</a><li><a href="/contributing/logging.html">Logging</a><li><a href="/contributing/immutables.html">Immutable Value Types</a><li><a href="/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></nav></div></section><footer><div class='width'>&copy; Copyright Facebook, 2013 -</div></footer><script src="/google-code-prettify/prettify.js"></script><script>prettyPrint()</script></body></html>